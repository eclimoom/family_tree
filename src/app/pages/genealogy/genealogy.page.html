<div class="page-toolbar">
  <div class="container-fluid d-flex justify-content-between align-items-center">
    <div class="d-flex align-items-center gap-2 flex-wrap">
      <span class="fw-semibold">当前族谱：</span>
      <select class="form-select form-select-sm w-auto" [value]="currentTree?.id" (change)="onTreeSelectChange($event)">
        <option *ngFor="let tree of trees" [value]="tree.id">{{ tree.name }}</option>
      </select>
    </div>
    <button class="btn btn-outline-secondary btn-sm" (click)="goBackToList()">返回列表</button>
  </div>
</div>

<section class="bg-home d-flex">
  <aside class="left-pane">
    <div class="profile">
      <button type="button" title="close" class="btn btn-close" (click)="onBackBtnClick()"></button>
      <div class="avatar-wrap">
        <img alt="" [src]="avatarUrl" class="avatar" />
      </div>
      <h1 class="name">{{ userInfo.name || '' }}</h1>
      <p class="lifespa">{{ lifeStatusText }}</p>
    </div>
    <div class="user-wrap" [ngClass]="{'add-relation': isAddRelationMode}">
      <div class="user-tools add-hide" id="tools-header">
        <div class="d-flex justify-content-center">
          <button class="btn add-relation-btn" (click)="onAddRelationClick()">
            <i class="d-block mx-auto icon icon-circle icon-add"></i>
            <span>添加关系</span>
          </button>
          <button class="btn btn">
            <i class="d-block mx-auto icon icon-circle icon-tree"></i>
            <span>关系树</span>
          </button>
        </div>
        <div class="view-profile">
          <a class="btn btn-view-profile mx-auto btn-outline-primary rounded-pill">查看个人信息</a>
        </div>
      </div>
      <div id="profile-editor" class="profile-editor px-3 py-3">
        <div class="add-show">
          <h4 class="title-heading">添加关系</h4>
          <div class="mb-4 row">
            <label for="btnradio1" class="col-form-label text-end col-sm-3 px-0">关系类型</label>
            <div class="col-sm-9 pe-0">
              <div class="btn-group relation-group">
                <label class="btn btn-outline-primary" for="relation">
                  <input type="radio" class="btn-check" name="relation" id="btnradio1" autocomplete="off">
                  父母
                </label>
                <label class="btn btn-outline-primary">
                  <input type="radio" class="btn-check" name="relation" autocomplete="off">
                  夫妻</label>
                <label class="btn btn-outline-primary">
                  <input type="radio" class="btn-check" name="relation" autocomplete="off">
                  同辈</label>
                <label class="btn btn-outline-primary">
                  <input type="radio" class="btn-check" name="relation" autocomplete="off">
                  子女</label>
              </div>
            </div>
          </div>
        </div>

        <h5 class="title-heading">基本信息</h5>
        <div class="mb-3 row">
          <label for="male" class="col-sm-3 text-end control-label col-form-label px-1">性别</label>
          <div class="col-sm-8">
            <div class="btn-group">
              <label class="btn btn-outline-primary" [ngClass]="{'active': userInfo.gender === '男'}" for="male">
                <input type="radio" class="btn-check" name="gender"
                  value="男" id="male" [(ngModel)]="userInfo.gender" autocomplete="off" />
                男</label>
              <label class="btn btn-outline-primary" [ngClass]="{'active': userInfo.gender === '女'}" for="female">
                <input type="radio" class="btn-check" name="gender"
                  value="女" id="female" [(ngModel)]="userInfo.gender" autocomplete="off" />女</label>
              <label class="btn btn-outline-primary" [ngClass]="{'active': userInfo.gender === '未知'}" for="gender-other">
                <input type="radio" class="btn-check"
                  name="gender" id="gender-other" value="未知" [(ngModel)]="userInfo.gender" autocomplete="off" />未知</label>
            </div>
          </div>
        </div>
        <div class="mb-3 row">
          <label for="fname" class="col-sm-3 text-end control-label col-form-label px-1">姓名</label>
          <div class="col-sm-8">
            <input type="text" id="fname" placeholder="名称" class="form-control" [(ngModel)]="userInfo.name" />
          </div>
        </div>
        <h5 class="title-heading">其他信息</h5>
        <div class="mb-3 row">
          <label for="birthdate" class="col-sm-3 text-end control-label col-form-label px-1">出生日期</label>
          <div class="col-sm-8">
            <input type="date" id="birthdate" placeholder="出生日期" class="form-control" [(ngModel)]="userInfo.birthDate" />
          </div>
        </div>
        <div class="mb-3 row">
          <label for="birthAddress" class="col-sm-3 text-end control-label col-form-label px-1">出生地</label>
          <div class="col-sm-8">
            <input type="text" id="birthAddress" placeholder="上海市浦东区" class="form-control" [(ngModel)]="userInfo.birthAddress" />
          </div>
        </div>
        <div class="mb-3 row">
          <label for="livingAddress" class="col-sm-3 text-end control-label col-form-label px-1">现住址</label>
          <div class="col-sm-8">
            <input type="text" id="livingAddress" placeholder="北京市朝阳区" class="form-control" [(ngModel)]="userInfo.livingAddress" />
          </div>
        </div>
      </div>
    </div>
    <div class="fixed-bottom px-3 text-muted"><span id="user-id">{{ userId }}</span></div>
  </aside>

  <div class="container flex-grow-1 tree-wrap" id="cy" #cy>
    <div class="generation-labels" id="generation-labels"></div>
  </div>
</section>
